<div ng-controller="scoringRecipeController" ng-show="finishedLoading">
   <link ng-href="{{styleSheetUrl}}" rel="stylesheet" type="text/css">
   <form class="dku-form-horizontal">
      <div class="control-group">
         <label class="control-label">Max number of class labels</label>
         <div class="controls">
            <input name=max_nb_labels type="number" min="0" step="1" ng-model="config.max_nb_labels"/>
         </div>
      </div>
      <div class="control-group">
         <label class="control-label">Min probability threshold</label>
         <div class="controls">
            <input name=min_threshold type="number" min="0" max="1" step="0.1" ng-model="config.min_threshold"/>
            <span class="help-inline">Class labels less probable than this threshold (between 0 and 1) will not be output.</span>
         </div>
      </div>
      <div ng-if="canUseGPU">
         <h2 class="settings-section-title">GPU</h2>
         <div class="control-group">
            <label class="control-label">Use GPU</label>
            <div class="controls">
               <input name=should_use_gpu type="checkbox" ng-model="config.should_use_gpu"/>
            </div>
         </div>
         <div ng-show="canUseGPU && config.should_use_gpu">
            <div class="control-group">
               <label class="control-label">GPU Usage</label>
               <div class="controls">
                  <select dku-bs-select
                     name="gpu_usage" 
                     ng-model="config.gpu_usage"
                     ng-options="gc.value as gc.label for gc in gpuUsage">
                  </select>
               </div>
            </div>
            <div ng-if="config.gpu_usage == 'custom'">
               <div class="control-group">
                  <label class="control-label">Select GPUs to use</label>
                  <div class="controls">
                     <div
                        name="gpu_list"
                        ng-model="config.gpu_list"
                        options='gpuList'
                        multiselect-field
                        required>
                     </div>
                  </div>
               </div>
            </div>
            <div class="control-group">
               <label class="control-label">GPU Memory</label>
               <div class="controls">
                  <select dku-bs-select
                     name="gpu_memory"
                     ng-model="config.gpu_memory"
                     ng-options="gm.value as gm.label for gm in gpuMemory">
                  </select>
               </div>
            </div>
            <div ng-if="config.gpu_memory == 'custom'">
               <div class="control-group">
                  <label class="control-label">Memory limit per GPU</label>
                  <div class="controls">
                     <input name=memory_limit style="width: 50px" type="number" ng-model="config.memory_limit" required/>
                     <span class="help-inline">in MB</span>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </form>
</div>